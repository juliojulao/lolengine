{% load static %}
<title>LoL Engine</title>
<head>
    <link rel="stylesheet" type="text/css" href="{% static 'myWebpageCSS.css' %}">
    <script type="text/javascript" src="{% static 'main.js' %}"></script>
</head>

<div style="padding: 45px;">
    <a href="{% url 'index' %}" style="color: inherit; text-decoration: none;">
        <img src="{% static 'poroicon.png' %}" alt="Poro Icon" height="100px" width="100px" style="vertical-align: -30px; padding-right: 10px;"/>
        <h1>LoL Engine</h1>
    </a>
</div>
<body>
    <section>
        <form method="post">
            {% csrf_token %}
            <div>
                {{ form.ign }} {{ form.region }}
                <input type="submit" value="Search" style="text-align: center; display: inline; 
                    padding: 8px; font-family:Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
                    font-size: 32; color: rgb(70, 70, 70)">
            </div>
        </form>
    </section>
    {% if player_info %}
    <section>
        <div class='rank', style="font-size: 48;">
            Showing results for '{{ player_info.ign }}'
        </div>
        <div class='rank' style='white-space: pre-line; text-align: left;'>
            {% if player_info.rank == "Unranked" %}
                Rank: Unranked
            {% else %}
                Rank: {{ player_info.rank.tier }} {{ player_info.rank.rank }}
                Wins: {{ player_info.rank.wins }}
                Losses: {{ player_info.rank.losses }}
                Winrate: {{ player_info.rank.winrate }}
            {% endif %}
        </div>
        <div class='matches'>
            {% for match in player_info.recent_matches %}
            <div class='match_table'>
                <table>
                    <tr>
                        <th></th>
                        <th>D</th>
                        <th>F</th>
                        <th style="max-width: 100px; text-align: left;">Name</th>
                        <th>KDA</th>
                        <th>Damage</th>
                        <th>Gold</th>
                        <th>Items</th>
                    </tr>
                    {% for player in match %}
                    <tr class="winloss" result="{{player.Win}}">
                        <td><img style="display: block;" src="http://ddragon.leagueoflegends.com/cdn/11.9.1/img/champion/{{player.champion.id}}.png" alt="{{player.champion.name}}" height="35px" width="35px" title="{{player.champion.name}}"></td>
                        <td><img style="display: block;" src="http://ddragon.leagueoflegends.com/cdn/11.10.1/img/spell/{{player.ss1.id}}.png" alt="{{player.ss1.name}}" height="35px" width="35px" title="{{player.ss1.name}}"></td>
                        <td><img style="display: block;" src="http://ddragon.leagueoflegends.com/cdn/11.10.1/img/spell/{{player.ss2.id}}.png" alt="{{player.ss2.name}}" height="35px" width="35px" title="{{player.ss2.name}}"></td>
                        <td style="max-width: 100px; text-align: left;">{{player.ign}}</td>
                        <td>{{player.kda}}</td>
                        <td>{{player.totaldamageDealt}}</td>
                        <td>{{player.gold}}</td>
                        <td style="text-align: left;">
                            {% for item in player.items %}
                                <img src="http://ddragon.leagueoflegends.com/cdn/11.9.1/img/item/{{item.image.full}}" alt="{{item.name}}" height="35px" width="35px" title="{{item.name}}">
                            {% endfor %}
                        </td>
                    </tr>
                    {% endfor %}
                </table>
                <script>changeBackgroundColor()</script>
            </div>
            {% endfor %}
        </div>
    </section>
    {% else %}
    <section>
        <div class='rank' style='white-space: pre-line;'>
            {{ error }}
        </div>
    </section>
    {% endif %}
</body>